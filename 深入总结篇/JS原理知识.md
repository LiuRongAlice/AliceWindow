## 概念

### 1、作用域

变量作用域是指变量在程序中可以访问的有效范围，也称为变量的可见性。分为全局变量和局部变量

- 全局变量：变量在整个页面中都是可见的，可以被自由的访问
- 局部变量：变量仅能在声明的函数内部可见，函数外事不允许访问的
- var声明的作用域事按照函数划分的



### 2、执行上下文

- JS引擎并不是一行行的解析和执行代码，而是一段段的去分析和执行，当执行一段代码的时候，先开始预处理，比如声明提升和函数提升
- 在执行某段js代码的时候，会进行一个准备工作，这个准备工作用专业的说话叫‘执行上下文“
- js可执行的代码分为三种类型，全局代码、函数代码、eval代码（忽略）
- 每执行一段代码，都会创建相对应的执行上下文，在脚本中可能存在多个执行上下文
- 因为有太多的执行上下文，JS创建了一个执行上下文栈用来管理执行上下文
- 当js开始解析程序的时候，最先遇到的全局代码，此时想执行上下文栈中压入一个全局执行上下文，全局的一定是在整体运行结束以后才被清空
- 当执行一个函数的时候，会创建一个函数的执行上下文，并压入到执行上下文栈中，只要函数从栈里弹出



### 3、变量对象

- 每个执行上下文都有三个重要的属性：
  - 变量对象、作用域链、this
- 变量对象是ECMAScript规范术语。在一个执行上下文中，变量对象才被激活，只有激活的变量对象，其各种属性才能被访问
- 变量对象是与执行上下文相关的书库作用域，储存了在上下文中定义的变量和函数声明

#### 全局上下文的变量对象

- window是预定义对象，作为JS全局函数和全局属性的占位符（全局的变量和函数就是window对象属性和方法）
- 全局执行上下文的变量对象起始就是全局对象window

#### 函数上下文的变量对象

- 进入执行上下文不会立马执行代码，只进行分析。此时首先第一步，变量对象包括了函数所有的形参和实参
- 检查所有声明的函数，由名称和对应值组成一个变量对象的属性被创建。如果变量对象已经有相同名字的属性，则完全替换
- 检查所有的声明的变量，创建键值对儿
- 变成变量对象的属性，如果变量名和已声明的形参或函数相同，则变量声明不会干扰已经存在的这类属性

### 2、this



##### 是什么？

- 一个关键字，一个内置的引用变量
- 在函数中都可以直接使用this
- this代表调用函数的当前对象
- 在定义函数时，this还没确定，只有执行时才动态确定（绑定）的



##### this的指向方式

- 默认绑定：常用函数调用类型：独立函数调用
  - 可以把这个规则看作是无法应用其他规则的时候 默认的规则，基本指向的是window

- 隐式绑定：当函数引用上下文对象的时候（obj)，隐式绑定规则会把函数中的this绑定到这个上下文对象上

- 显式绑定
- new绑定：构造函数只是一些使用new，操作符被调用的函数,使用new调用函数的时候，会构造一新的对象，这个时候 就把新的对象绑定给了函数的this上
- 







